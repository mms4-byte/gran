<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ğŸŒ™ Ù…Ø­Ø±Ø§Ø¨ Ø§Ù„Ø®ØªÙ…Ø© Ø§Ù„Ù…Ù„ÙƒÙŠ | Ø±Ù…Ø¶Ø§Ù† Ù…Ø¨Ø§Ø±Ùƒ</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cairo:wght@400;700;900&family=Reem+Kufi:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <style>
        :root {
            --gold: #d4af37; --gold-light: #f3cf7a; --gold-dark: #aa8c2c;
            --bg-dark: #0a0e17; --bg-card: rgba(20, 25, 40, 0.7);
            --text-primary: #ffffff; --text-secondary: rgba(255, 255, 255, 0.85);
            --success: #2ecc71; --success-glow: rgba(46, 204, 113, 0.5);
            --shadow-gold: 0 0 25px rgba(212, 175, 55, 0.4);
            --shadow-soft: 0 10px 40px rgba(0, 0, 0, 0.5);
            --transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* ğŸ” Ù…Ù†Ø¹ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù†Ø³Ø® */
        * {
            margin: 0; padding: 0; box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-font-smoothing: antialiased;
        }

        /* Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ØªØ­Ø¯ÙŠØ¯ ÙÙ‚Ø· ÙÙŠ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø¥Ø¯Ø®Ø§Ù„ */
        input, textarea { user-select: text !important; -webkit-user-select: text !important; }

        body {
            background: var(--bg-dark); color: var(--text-primary);
            font-family: 'Amiri', serif; min-height: 100vh; overflow-x: hidden;
            position: relative;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(212, 175, 55, 0.08) 0%, transparent 25%),
                radial-gradient(circle at 80% 70%, rgba(212, 175, 55, 0.06) 0%, transparent 30%),
                linear-gradient(135deg, #0a0e17 0%, #111827 50%, #0a0e17 100%);
            overscroll-behavior: none;
        }

        /* Ø®Ù„ÙÙŠØ© Ø§Ù„Ù†Ø¬ÙˆÙ… */
        .stars { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; }
        .star {
            position: absolute; background: var(--gold-light); border-radius: 50%;
            animation: twinkle var(--duration, 3s) infinite var(--delay, 0s);
            opacity: var(--opacity, 0.7); will-change: transform, opacity;
        }
        @keyframes twinkle { 0%, 100% { opacity: var(--opacity, 0.7); transform: scale(1); } 50% { opacity: 1; transform: scale(1.2); } }

        /* Ø§Ù„Ø²ÙŠÙ†Ø© Ø§Ù„Ø±Ù…Ø¶Ø§Ù†ÙŠØ© */
        .ramadan-decoration {
            position: fixed; top: 20px; left: 20px; font-size: 2.5rem; color: var(--gold);
            animation: float 6s ease-in-out infinite; z-index: 10;
            text-shadow: var(--shadow-gold); filter: drop-shadow(0 0 10px var(--gold));
            pointer-events: none;
        }
        .lantern {
            position: fixed; bottom: 30px; right: 30px; font-size: 3rem; color: var(--gold);
            animation: swing 4s ease-in-out infinite; z-index: 10;
            text-shadow: var(--shadow-gold); pointer-events: none;
        }
        @keyframes float { 0%, 100% { transform: translateY(0) rotate(0deg); } 50% { transform: translateY(-15px) rotate(5deg); } }
        @keyframes swing { 0%, 100% { transform: rotate(-5deg); } 50% { transform: rotate(8deg); } }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… */
        .progress-container {
            position: sticky; top: 0; height: 6px; background: rgba(255, 255, 255, 0.1);
            z-index: 1000; backdrop-filter: blur(10px); border-bottom: 1px solid rgba(212, 175, 55, 0.2);
        }
        #bar {
            height: 100%; width: 0%;
            background: linear-gradient(90deg, var(--gold-dark), var(--gold), var(--gold-light), var(--gold), var(--gold-dark));
            background-size: 200% 100%; animation: gradientShift 3s linear infinite;
            box-shadow: var(--shadow-gold); position: relative; transition: width 0.4s ease;
            will-change: width;
        }
        #bar::after {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shine 2s infinite;
        }
        @keyframes gradientShift { 0% { background-position: 0% 50%; } 100% { background-position: 200% 50%; } }
        @keyframes shine { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        header {
            text-align: center; padding: 40px 20px 30px; position: relative; z-index: 5;
            background: linear-gradient(to bottom, rgba(10, 14, 23, 0.95), transparent);
            border-bottom: 2px solid rgba(212, 175, 55, 0.3);
        }
        .greeting { font-size: 1.3rem; color: var(--gold-light); margin-bottom: 8px; font-weight: 400; letter-spacing: 1px; }
        h1 {
            font-family: 'Reem Kufi', sans-serif; font-size: clamp(2.2rem, 6vw, 3.8rem);
            font-weight: 700; color: var(--gold); margin: 5px 0 12px;
            text-shadow: 0 0 20px rgba(212, 175, 55, 0.5); position: relative; display: inline-block;
        }
        h1::after {
            content: ''; position: absolute; bottom: -8px; left: 50%; transform: translateX(-50%);
            width: 80%; height: 3px; background: linear-gradient(90deg, transparent, var(--gold), transparent);
            border-radius: 2px;
        }
        #date {
            font-size: 1.25rem; color: var(--text-secondary); margin-top: 15px;
            display: flex; align-items: center; justify-content: center; gap: 8px;
        }
        #date i { color: var(--gold); font-size: 1.1rem; }

        /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
        main {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px; padding: 30px 20px; max-width: 1600px; margin: 0 auto;
            position: relative; z-index: 5;
        }

        /* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
        .card {
            background: var(--bg-card); border-radius: 28px; padding: 28px 25px;
            border: 1px solid rgba(212, 175, 55, 0.15); backdrop-filter: blur(20px);
            position: relative; overflow: hidden; transition: var(--transition);
            box-shadow: var(--shadow-soft); will-change: transform, border-color;
        }
        .card::before {
            content: ''; position: absolute; top: 0; right: 0; width: 4px; height: 100%;
            background: linear-gradient(to bottom, var(--gold-dark), var(--gold), var(--gold-light));
            opacity: 0; transition: var(--transition);
        }
        .card:hover { transform: translateY(-3px); border-color: rgba(212, 175, 55, 0.4); }
        .card:hover::before { opacity: 1; }
        .card.active {
            border-color: var(--gold);
            background: linear-gradient(145deg, rgba(30, 38, 60, 0.95), rgba(20, 25, 40, 0.9));
            box-shadow: 0 10px 45px rgba(0, 0, 0, 0.7), var(--shadow-gold);
            transform: translateY(-2px);
        }
        .card.active::before { opacity: 1; width: 5px; }

        .card-header {
            display: flex; align-items: center; gap: 15px; margin-bottom: 22px;
            padding-bottom: 15px; border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .prayer-icon {
            width: 50px; height: 50px; background: linear-gradient(135deg, var(--gold-dark), var(--gold));
            border-radius: 16px; display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem; color: #0a0e17; box-shadow: 0 5px 20px rgba(212, 175, 55, 0.4); flex-shrink: 0;
        }
        .card h2 { font-family: 'Reem Kufi', sans-serif; font-size: 1.8rem; font-weight: 700; color: var(--gold); margin: 0; }
        .prayer-time { font-size: 0.95rem; color: var(--text-secondary); margin-top: 3px; display: flex; align-items: center; gap: 5px; }
        .prayer-time i { font-size: 0.9rem; color: var(--gold-light); }

        /* Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª */
        .action-item {
            display: flex; align-items: center; justify-content: space-between;
            background: rgba(255, 255, 255, 0.06); margin: 12px 0; padding: 16px 20px;
            border-radius: 20px; cursor: pointer; border: 1px solid transparent;
            transition: var(--transition); position: relative;
            touch-action: manipulation; will-change: background, border-color;
        }
        .action-item:active { transform: scale(0.99); }
        .action-item:hover { border-color: rgba(212, 175, 55, 0.5); background: rgba(255, 255, 255, 0.1); }
        .action-item.done {
            background: linear-gradient(135deg, rgba(46, 204, 113, 0.2), rgba(39, 174, 96, 0.15));
            border-color: var(--success);
        }

        .action-content { display: flex; align-items: center; gap: 15px; flex: 1; pointer-events: none; }
        .action-icon {
            width: 40px; height: 40px; border-radius: 12px; display: flex;
            align-items: center; justify-content: center; font-size: 1.2rem; flex-shrink: 0;
        }
        .prayer-action .action-icon { background: rgba(52, 152, 219, 0.2); color: #3498db; }
        .quran-action .action-icon { background: rgba(155, 89, 182, 0.2); color: #9b59b6; }
        .action-item.done .action-icon { background: rgba(46, 204, 113, 0.25); color: var(--success); }

        .action-text b { font-size: 1.25rem; font-weight: 700; display: block; margin-bottom: 2px; }
        .pages-badge {
            display: inline-flex; align-items: center; gap: 5px;
            background: rgba(212, 175, 55, 0.15); color: var(--gold-light);
            padding: 4px 12px; border-radius: 20px; font-size: 0.9rem; font-weight: 600;
            border: 1px solid rgba(212, 175, 55, 0.3);
        }
        .action-item.done .pages-badge { background: rgba(46, 204, 113, 0.2); color: var(--success); border-color: var(--success); }

        /* ğŸ”˜ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© - Ù…Ø­Ø³Ù‘Ù†Ø© Ù„Ù„Ø£Ø¯Ø§Ø¡ */
        .toggle-circle {
            width: 42px; height: 42px; border-radius: 50%;
            border: 3px solid rgba(255, 255, 255, 0.3);
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: var(--transition);
            flex-shrink: 0; position: relative; background: transparent;
            touch-action: manipulation; will-change: transform, border-color, background;
            -webkit-tap-highlight-color: transparent;
        }
        .toggle-circle:active { transform: scale(0.95); }
        .toggle-circle:hover { border-color: var(--gold); transform: scale(1.08); box-shadow: 0 0 20px rgba(212, 175, 55, 0.4); }
        .toggle-circle.done {
            border-color: var(--success); background: var(--success);
            box-shadow: 0 0 25px var(--success-glow); transform: scale(1.03);
        }
        .toggle-circle i {
            font-size: 1.3rem; color: transparent; transition: var(--transition);
            transform: scale(0); pointer-events: none;
        }
        .toggle-circle.done i { color: #fff; transform: scale(1); animation: checkPop 0.25s ease-out; }
        @keyframes checkPop { 0% { transform: scale(0); opacity: 0; } 60% { transform: scale(1.3); } 100% { transform: scale(1); opacity: 1; } }
        .toggle-circle::after {
            content: ''; position: absolute; inset: -5px; border-radius: 50%;
            border: 2px solid transparent; transition: var(--transition); pointer-events: none;
        }
        .toggle-circle.done::after { border-color: var(--success); animation: ringPulse 0.5s ease-out; }
        @keyframes ringPulse { 0% { transform: scale(0.8); opacity: 1; } 100% { transform: scale(1.8); opacity: 0; } }

        /* ğŸ’ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ */
        .profile-section {
            grid-column: 1 / -1; display: flex; justify-content: center;
            padding: 10px 0 20px; margin-top: 10px;
        }
        .profile-card {
            text-align: center; background: rgba(255, 255, 255, 0.03);
            padding: 25px 35px; border-radius: 28px;
            border: 1px solid rgba(212, 175, 55, 0.3);
            backdrop-filter: blur(20px); box-shadow: var(--shadow-soft);
            display: inline-flex; align-items: center; gap: 20px;
            transition: var(--transition); max-width: 100%;
            will-change: transform, border-color;
        }
        .profile-card:hover { transform: translateY(-3px); border-color: var(--gold); }
        .profile-img {
            width: 75px; height: 75px; border-radius: 50%;
            border: 3px solid var(--gold); overflow: hidden; flex-shrink: 0;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.3); position: relative;
        }
        .profile-img::before {
            content: ''; position: absolute; inset: -3px; border-radius: 50%;
            padding: 3px; background: linear-gradient(135deg, var(--gold-dark), var(--gold), var(--gold-light));
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor; mask-composite: exclude;
        }
        .profile-img img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; display: block; }
        .profile-info { text-align: right; }
        .profile-name {
            font-family: 'Cairo', sans-serif; font-size: 1.5rem; font-weight: 900;
            color: var(--gold); margin: 0; display: flex; align-items: center; gap: 8px;
        }
        .verified-badge { color: #3b82f6; font-size: 1.4rem; filter: drop-shadow(0 0 8px rgba(59, 130, 246, 0.5)); }
        .profile-role { font-size: 1rem; color: var(--text-secondary); margin-top: 4px; display: flex; align-items: center; gap: 6px; }
        .profile-role i { color: var(--gold-light); font-size: 0.95rem; }

        /* Ø§Ù„ÙÙˆØªØ± */
        footer {
            text-align: center; padding: 35px 20px 50px; color: var(--gold-light);
            font-size: 1.4rem; font-weight: 600; position: relative; z-index: 5; line-height: 1.5;
        }
        footer::before { content: 'âœ¦'; display: block; font-size: 1.8rem; margin-bottom: 12px; color: var(--gold); animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 0.7; transform: scale(1); } 50% { opacity: 1; transform: scale(1.2); } }

        /* Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² */
        .celebration { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 2000; display: none; }
        .confetti { position: absolute; width: 12px; height: 12px; background: var(--gold); border-radius: 2px; animation: confetti-fall 3s ease-in-out forwards; }
        @keyframes confetti-fall { 0% { transform: translateY(-100px) rotate(0deg) scale(0); opacity: 1; } 10% { opacity: 1; transform: translateY(-50px) rotate(36deg) scale(1); } 100% { transform: translateY(100vh) rotate(720deg) scale(0.3); opacity: 0; } }
        .completion-message {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.9);
            background: linear-gradient(145deg, rgba(20, 25, 40, 0.98), rgba(30, 38, 60, 0.95));
            border: 3px solid var(--gold); border-radius: 30px; padding: 40px 35px;
            text-align: center; max-width: 90%; width: 450px; z-index: 1500;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.8), var(--shadow-gold);
            opacity: 0; pointer-events: none; transition: var(--transition);
        }
        .completion-message.show { transform: translate(-50%, -50%) scale(1); opacity: 1; pointer-events: all; }
        .completion-message h3 { font-family: 'Reem Kufi', sans-serif; font-size: 2.2rem; color: var(--gold); margin-bottom: 15px; display: flex; align-items: center; justify-content: center; gap: 12px; }
        .completion-message p { font-size: 1.3rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 25px; }
        .completion-message .btn-close {
            background: linear-gradient(135deg, var(--gold-dark), var(--gold)); color: #0a0e17;
            border: none; padding: 14px 45px; border-radius: 50px;
            font-family: 'Reem Kufi', sans-serif; font-size: 1.2rem; font-weight: 700;
            cursor: pointer; transition: var(--transition); box-shadow: 0 8px 25px rgba(212, 175, 55, 0.4);
        }
        .completion-message .btn-close:hover { transform: translateY(-3px); box-shadow: 0 12px 35px rgba(212, 175, 55, 0.6); }

        /* Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
        .loading { text-align: center; padding: 60px 20px; color: var(--gold-light); font-size: 1.3rem; }
        .loading i { display: block; font-size: 2.5rem; margin-bottom: 15px; animation: spin 1.5s linear infinite; color: var(--gold); }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø¬ÙˆØ§Ù„ */
        @media (max-width: 768px) {
            .ramadan-decoration { top: 15px; left: 15px; font-size: 2rem; }
            .lantern { bottom: 20px; right: 20px; font-size: 2.3rem; }
            header { padding: 30px 15px 25px; }
            main { padding: 20px 15px; gap: 20px; }
            .card { padding: 24px 20px; border-radius: 24px; }
            .card-header { gap: 12px; margin-bottom: 18px; padding-bottom: 12px; }
            .prayer-icon { width: 45px; height: 45px; font-size: 1.3rem; }
            .card h2 { font-size: 1.6rem; }
            .action-item { padding: 14px 18px; margin: 10px 0; }
            .action-text b { font-size: 1.15rem; }
            .toggle-circle { width: 38px; height: 38px; }
            .profile-card { flex-direction: column; gap: 15px; padding: 22px 28px; }
            .profile-info { text-align: center; }
            .profile-name { justify-content: center; }
            footer { padding: 30px 15px 40px; font-size: 1.25rem; }
        }
        @media (max-width: 480px) {
            h1 { font-size: 2.3rem; }
            .card-header { flex-direction: column; text-align: center; gap: 10px; }
            .prayer-time { justify-content: center; }
            .action-content { flex-direction: column; text-align: center; gap: 10px; }
        }

        /* Ø­Ø±ÙƒØ§Øª Ø¯Ø®ÙˆÙ„ */
        @media (prefers-reduced-motion: no-preference) {
            .card { animation: cardEntrance 0.5s ease backwards; }
            .card:nth-child(1) { animation-delay: 0.1s; }
            .card:nth-child(2) { animation-delay: 0.2s; }
            .card:nth-child(3) { animation-delay: 0.3s; }
            .card:nth-child(4) { animation-delay: 0.4s; }
            .card:nth-child(5) { animation-delay: 0.5s; }
            @keyframes cardEntrance { from { opacity: 0; transform: translateY(25px); } to { opacity: 1; transform: translateY(0); } }
        }
    </style>
</head>
<body>

<!-- Ø®Ù„ÙÙŠØ© Ø§Ù„Ù†Ø¬ÙˆÙ… -->
<div class="stars" id="stars"></div>

<!-- Ø§Ù„Ø²ÙŠÙ†Ø© Ø§Ù„Ø±Ù…Ø¶Ø§Ù†ÙŠØ© -->
<div class="ramadan-decoration"><i class="fas fa-moon"></i></div>
<div class="lantern"><i class="fas fa-lightbulb"></i></div>

<!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… -->
<div class="progress-container"><div id="bar"></div></div>

<!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
<header>
    <div class="greeting" id="greeting">Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ… ğŸŒ™</div>
    <h1>Ù…ÙØ­Ù€Ø±ÙØ§Ø¨Ù Ø§Ù„Ø®ÙØªÙ€Ù…ÙØ© <span style="color:var(--gold-light);font-size:0.8em">Ø§Ù„Ù…Ù„ÙƒÙŠ</span></h1>
    <div id="date"><i class="far fa-calendar-alt"></i><span id="date-text"></span></div>
</header>

<!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
<main id="app">
    <div class="loading"><i class="fas fa-spinner"></i>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ...</div>
</main>

<!-- Ø§Ù„ÙÙˆØªØ± -->
<footer>
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†Ø§ Ù…Ù† Ø£Ù‡Ù„ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„Ø°ÙŠÙ† Ù‡Ù… Ø£Ù‡Ù„ÙÙƒ ÙˆØ®Ø§ØµØªÙÙƒ"
    <br>
    <span style="font-size:1.1rem;color:var(--gold);margin-top:8px;display:block">
        <i class="fas fa-heart" style="color:#e74c3c;margin:0 5px"></i>
        ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡ Ù…Ù†Ø§ ÙˆÙ…Ù†ÙƒÙ… ØµØ§Ù„Ø­ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„
    </span>
</footer>

<!-- Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² -->
<div class="completion-message" id="completionMsg">
    <h3><i class="fas fa-crown"></i> Ù…Ø¨Ø§Ø±Ùƒ Ø¹Ù„ÙŠÙƒ!</h3>
    <p>Ø£ØªÙ…Ù…Øª Ø¬Ù…ÙŠØ¹ Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ… Ø¨Ù†Ø¬Ø§Ø­ ğŸ‰<br>Ø¬Ø²Ø§Ùƒ Ø§Ù„Ù„Ù‡ Ø®ÙŠØ±Ø§Ù‹ ÙˆØ¬Ø¹Ù„Ù‡ ÙÙŠ Ù…ÙŠØ²Ø§Ù† Ø­Ø³Ù†Ø§ØªÙƒ</p>
    <button class="btn-close" onclick="closeCompletion()"><i class="fas fa-check-circle"></i> Ø£Ø­Ø³Ù†Øª!</button>
</div>

<!-- ØªØ£Ø«ÙŠØ± Ø§Ù„Ø§Ø­ØªÙØ§Ù„ -->
<div class="celebration" id="celebration"></div>

<script>
    // ğŸ” Ø­Ù…Ø§ÙŠØ© Ù…Ù†Ø¹ Ø§Ù„Ù†Ø³Ø® - ØªØ¹Ù…Ù„ ÙÙˆØ±Ø§Ù‹
    (function protectContent() {
        // Ù…Ù†Ø¹ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙŠÙ…Ù†Ù‰
        document.addEventListener('contextmenu', e => e.preventDefault(), { passive: false });
        
        // Ù…Ù†Ø¹ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù†Øµ
        document.addEventListener('selectstart', e => e.preventDefault(), { passive: false });
        
        // Ù…Ù†Ø¹ Ø§Ù„Ù†Ø³Ø® ÙˆØ§Ù„Ù‚Øµ
        document.addEventListener('copy', e => e.preventDefault(), { passive: false });
        document.addEventListener('cut', e => e.preventDefault(), { passive: false });
        
        // Ù…Ù†Ø¹ Ø§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª
        document.addEventListener('dragstart', e => e.preventDefault(), { passive: false });
        
        // Ù…Ù†Ø¹ Ø§Ø®ØªØµØ§Ø±Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­
        document.addEventListener('keydown', e => {
            if (e.ctrlKey && (e.key === 'c' || e.key === 'u' || e.key === 's' || e.key === 'p')) {
                e.preventDefault();
                return false;
            }
            // Ù…Ù†Ø¹ F12 Ùˆ Ctrl+Shift+I Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø·ÙˆØ±
            if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I')) {
                e.preventDefault();
                return false;
            }
        }, { passive: false });
    })();

    // âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
    const CONFIG = {
        telegram: { token: "8457845103:AAFXlTTnoLyTWyGfXsT7hgZrpsVVjkPQWb8", chatId: localStorage.getItem('telegram_chat_id') || null },
        storage: { key: 'ramadan_khatma_v6', dateKey: 'last_sync_date' },
        prayers: [
            { id: 0, name: "Ø§Ù„ÙØ¬Ø±", icon: "fa-cloud-sun", range: "1 - 4", time: "Ù‚Ø¨Ù„ Ø§Ù„Ø´Ø±ÙˆÙ‚", color: "#3498db" },
            { id: 1, name: "Ø§Ù„Ø¸Ù‡Ø±", icon: "fa-sun", range: "5 - 8", time: "Ø¨Ø¹Ø¯ Ø§Ù„Ø²ÙˆØ§Ù„", color: "#e67e22" },
            { id: 2, name: "Ø§Ù„Ø¹ØµØ±", icon: "fa-cloud-sun", range: "9 - 12", time: "Ù‚Ø¨Ù„ Ø§Ù„ØºØ±ÙˆØ¨", color: "#9b59b6" },
            { id: 3, name: "Ø§Ù„Ù…ØºØ±Ø¨", icon: "fa-moon", range: "13 - 16", time: "Ø¨Ø¹Ø¯ Ø§Ù„ØºØ±ÙˆØ¨", color: "#e74c3c" },
            { id: 4, name: "Ø§Ù„Ø¹Ø´Ø§Ø¡", icon: "fa-star", range: "17 - 20", time: "Ø¨Ø¹Ø¯ Ø§Ù„Ø¹Ø´Ø§Ø¡", color: "#1abc9c" }
        ]
    };

    // ğŸ¨ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø¬ÙˆÙ… (Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·)
    function createStars() {
        const container = document.getElementById('stars');
        if (container.children.length > 0) return; // Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø±
        const count = window.innerWidth > 768 ? 80 : 40;
        for (let i = 0; i < count; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = `${Math.random() * 100}%`;
            star.style.top = `${Math.random() * 100}%`;
            star.style.width = star.style.height = `${Math.random() * 3 + 1}px`;
            star.style.setProperty('--duration', `${Math.random() * 3 + 2}s`);
            star.style.setProperty('--delay', `${Math.random() * 5}s`);
            star.style.setProperty('--opacity', Math.random() * 0.5 + 0.3);
            container.appendChild(star);
        }
    }

    // ğŸ“… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø¬Ø¯ÙŠØ¯
    function checkDailyReset() {
        const today = new Date().toDateString();
        const last = localStorage.getItem(CONFIG.storage.dateKey);
        if (last !== today) {
            const old = JSON.parse(localStorage.getItem(CONFIG.storage.key) || '{}');
            if (Object.keys(old).length > 0) {
                const hist = JSON.parse(localStorage.getItem('ramadan_history') || '[]');
                hist.push({ date: last || 'Ø£ÙˆÙ„ Ø§Ø³ØªØ®Ø¯Ø§Ù…', completed: Object.values(old).filter(v=>v).length, total: CONFIG.prayers.length * 2 });
                localStorage.setItem('ramadan_history', JSON.stringify(hist.slice(-30)));
            }
            localStorage.setItem(CONFIG.storage.dateKey, today);
            return true;
        }
        return false;
    }

    // ğŸ’¬ Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… (ØºÙŠØ± Ù…ØªØ²Ø§Ù…Ù† Ù„Ø¹Ø¯Ù… Ø­Ø¬Ø¨ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©)
    function sendNotification(text) {
        if (!CONFIG.telegram.chatId || CONFIG.telegram.chatId === "Ø¶Ø¹_Ø±Ù‚Ù…_Ø§Ù„Ø§ÙŠØ¯ÙŠÙƒ_Ù‡Ù†Ø§") return;
        // Ø¥Ø±Ø³Ø§Ù„ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© Ø¯ÙˆÙ† Ø§Ù†ØªØ¸Ø§Ø±
        setTimeout(() => {
            fetch(`https://api.telegram.org/bot${CONFIG.telegram.token}/sendMessage?chat_id=${CONFIG.telegram.chatId}&text=${encodeURIComponent(text)}&parse_mode=HTML`).catch(()=>{});
        }, 0);
    }

    // ğŸ‰ ØªØ£Ø«ÙŠØ± Ø§Ù„Ø§Ø­ØªÙØ§Ù„
    function triggerCelebration() {
        const cel = document.getElementById('celebration');
        cel.style.display = 'block';
        for (let i = 0; i < 50; i++) {
            const c = document.createElement('div');
            c.className = 'confetti';
            c.style.background = ['#d4af37','#f3cf7a','#2ecc71','#27ae60','#f1c40f'][Math.floor(Math.random()*5)];
            c.style.left = `${Math.random()*100}%`;
            c.style.animationDelay = `${Math.random()*2}s`;
            cel.appendChild(c);
            setTimeout(() => c.remove(), 4000);
        }
        setTimeout(() => { cel.style.display = 'none'; cel.innerHTML = ''; }, 4000);
    }

    function showCompletionMessage() {
        document.getElementById('completionMsg').classList.add('show');
        triggerCelebration();
        sendNotification('ğŸ‰ <b>Ø£Ø­Ø³Ù†Øª!</b>\nØ£ØªÙ…Ù…Øª Ø¬Ù…ÙŠØ¹ Ù…Ù‡Ø§Ù… <b>Ù…Ø­Ø±Ø§Ø¨ Ø§Ù„Ø®ØªÙ…Ø©</b> Ù„Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ….\n<em>ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡ Ù…Ù†Ùƒ ÙˆÙ…Ù†Ù‘Ø§</em> ğŸŒ™');
    }
    function closeCompletion() { document.getElementById('completionMsg').classList.remove('show'); }

    // ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø¹Ù†ØµØ± ÙˆØ§Ø­Ø¯ ÙÙ‚Ø· (Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© Ø±Ø³Ù… ÙƒÙ„ Ø´ÙŠØ¡) - Ù„Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ù„Ø§Ùƒ
    function updateTaskUI(prayerId, type, isDone) {
        const card = document.querySelector(`.card[data-prayer="${prayerId}"]`);
        if (!card) return;
        
        const selector = type === 'p' ? '.prayer-action' : '.quran-action';
        const item = card.querySelector(selector);
        const circle = item.querySelector('.toggle-circle');
        
        if (isDone) {
            item.classList.add('done');
            circle.classList.add('done');
            // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø¥Ø°Ø§ Ø§ÙƒØªÙ…Ù„Øª Ø§Ù„Ù…Ù‡Ù…ØªØ§Ù†
            const prayerDone = item.classList.contains('done');
            const otherType = type === 'p' ? 'q' : 'p';
            const otherItem = card.querySelector(type === 'p' ? '.quran-action' : '.prayer-action');
            if (otherItem && otherItem.classList.contains('done')) {
                card.classList.add('active');
            }
        } else {
            item.classList.remove('done');
            circle.classList.remove('done');
            card.classList.remove('active');
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… Ø¨Ø³Ø±Ø¹Ø©
        updateProgressBarFast();
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„ÙƒØ§Ù…Ù„
        checkAllCompletedFast();
    }

    // ğŸ“Š ØªØ­Ø¯ÙŠØ« Ø³Ø±ÙŠØ¹ Ù„Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… (Ø¨Ø¯ÙˆÙ† Ø¥Ø¹Ø§Ø¯Ø© Ø­Ø³Ø§Ø¨ ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„Ø©)
    function updateProgressBarFast() {
        const state = JSON.parse(localStorage.getItem(CONFIG.storage.key) || '{}');
        const total = CONFIG.prayers.length * 2;
        const completed = Object.values(state).filter(v => v === true).length;
        const percent = Math.round((completed / total) * 100);
        const bar = document.getElementById('bar');
        bar.style.width = `${percent}%`;
        if (percent >= 100) bar.style.background = 'linear-gradient(90deg, #2ecc71, #27ae60, #2ecc71)';
        else if (percent >= 70) bar.style.background = 'linear-gradient(90deg, #f39c12, #e67e22, #f39c12)';
        else bar.style.background = 'linear-gradient(90deg, var(--gold-dark), var(--gold), var(--gold-light), var(--gold), var(--gold-dark))';
    }

    // âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø³Ø±ÙŠØ¹ Ù…Ù† Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„ÙƒØ§Ù…Ù„
    function checkAllCompletedFast() {
        const state = JSON.parse(localStorage.getItem(CONFIG.storage.key) || '{}');
        const total = CONFIG.prayers.length * 2;
        const completed = Object.values(state).filter(v => v === true).length;
        if (completed === total && total > 0) {
            setTimeout(showCompletionMessage, 300);
        }
    }

    // ğŸ® ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù‡Ù…Ø© - Ù…Ø­Ø³Ù‘Ù† Ù„Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙÙˆØ±ÙŠ
    function toggleTask(prayerId, type, msg) {
        const state = JSON.parse(localStorage.getItem(CONFIG.storage.key) || '{}');
        const key = `${type}${prayerId}`;
        const newValue = !state[key];
        state[key] = newValue;
        
        // âœ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ÙÙˆØ±Ø§Ù‹ Ù‚Ø¨Ù„ Ø§Ù„Ø­ÙØ¸ (Ù„Ø¥Ù„ØºØ§Ø¡ Ø£ÙŠ ØªØ£Ø®ÙŠØ±)
        updateTaskUI(prayerId, type, newValue);
        
        // Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©
        localStorage.setItem(CONFIG.storage.key, JSON.stringify(state));
        
        // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± (ØºÙŠØ± Ù…ØªØ²Ø§Ù…Ù†)
        if (newValue) sendNotification(msg);
    }

    // ğŸ“… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ØªØ­ÙŠØ©
    function updateDateAndGreeting() {
        const now = new Date();
        document.getElementById('date-text').textContent = now.toLocaleDateString('ar-SA', { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' });
        const h = now.getHours();
        const g = document.getElementById('greeting');
        if (h >= 5 && h < 12) g.textContent = 'ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ± ğŸŒ… Ø±Ù…Ø¶Ø§Ù† Ù…Ø¨Ø§Ø±Ùƒ';
        else if (h >= 12 && h < 18) g.textContent = 'Ù…Ø³Ø§Ø¡ Ø§Ù„Ù†ÙˆØ± ğŸŒ¤ï¸ ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡ Ø·Ø§Ø¹ØªÙƒÙ…';
        else g.textContent = 'Ù„ÙŠÙ„Ø© Ø·ÙŠØ¨Ø© ğŸŒ™ Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù‡Ø§ Ù„ÙŠÙ„Ø© Ù…ØºÙØ±Ø©';
    }

    // ğŸ”„ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø£ÙˆÙ„ÙŠ Ù„Ù„ÙˆØ§Ø¬Ù‡Ø©
    function renderApp() {
        const app = document.getElementById('app');
        const state = JSON.parse(localStorage.getItem(CONFIG.storage.key) || '{}');
        checkDailyReset();
        updateDateAndGreeting();

        const cardsHTML = CONFIG.prayers.map(prayer => {
            const pDone = state[`p${prayer.id}`] === true;
            const qDone = state[`q${prayer.id}`] === true;
            const active = pDone && qDone ? 'active' : '';
            return `
                <div class="card ${active}" data-prayer="${prayer.id}">
                    <div class="card-header">
                        <div class="prayer-icon"><i class="fas ${prayer.icon}"></i></div>
                        <div>
                            <h2>ØµÙ„Ø§Ø© ${prayer.name}</h2>
                            <div class="prayer-time"><i class="far fa-clock"></i><span>${prayer.time}</span></div>
                        </div>
                    </div>
                    <div class="action-item prayer-action ${pDone ? 'done' : ''}">
                        <div class="action-content">
                            <div class="action-icon"><i class="fas fa-person-praying"></i></div>
                            <div class="action-text"><b>Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙØ±ÙŠØ¶Ø©</b><span style="opacity:0.85;font-size:0.9rem">Ø£Ø¯Ù‘ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© ÙÙŠ ÙˆÙ‚ØªÙ‡Ø§</span></div>
                        </div>
                        <div class="toggle-circle ${pDone ? 'done' : ''}" data-action="toggle" data-id="${prayer.id}" data-type="p">
                            <i class="fas fa-check"></i>
                        </div>
                    </div>
                    <div class="action-item quran-action ${qDone ? 'done' : ''}">
                        <div class="action-content">
                            <div class="action-icon"><i class="fas fa-book-quran"></i></div>
                            <div class="action-text"><b>Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù‚Ø±Ø¢Ù†</b><span class="pages-badge"><i class="fas fa-layer-group"></i>ØµÙØ­Ø© ${prayer.range}</span></div>
                        </div>
                        <div class="toggle-circle ${qDone ? 'done' : ''}" data-action="toggle" data-id="${prayer.id}" data-type="q">
                            <i class="fas fa-check"></i>
                        </div>
                    </div>
                </div>
            `;
        }).join('');

        const profile = `
            <div class="profile-section">
                <div class="profile-card">
                    <div class="profile-img">
                        <img src="https://iili.io/fbckoRn.md.jpg" alt="Ù…Ø±ÙˆØ© Ù…Ø­Ù…Ø¯" onerror="this.src='https://ui-avatars.com/api/?name=Marwa+Mohammad&background=d4af37&color=0a0e17&size=128'">
                    </div>
                    <div class="profile-info">
                        <h3 class="profile-name">Ù…Ø±ÙˆØ© Ù…Ø­Ù…Ø¯ <i class="material-icons verified-badge">verified</i></h3>
                        <div class="profile-role"><i class="fas fa-code"></i><span>Ù…ÙØ·ÙˆÙÙ‘Ø±Ø© Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</span></div>
                    </div>
                </div>
            </div>
        `;
        app.innerHTML = cardsHTML + profile;
        
        // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
        updateProgressBarFast();
        
        // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„Ù„Ø¯ÙˆØ§Ø¦Ø± (ØªÙÙˆÙŠØ¶ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„Ø£Ø¯Ø§Ø¡ Ø£ÙØ¶Ù„)
        app.addEventListener('click', handleCardClick);
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²
        checkAllCompletedFast();
    }

    // ğŸ–±ï¸ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª ÙˆØ§Ù„Ø¯ÙˆØ§Ø¦Ø± - Ù…Ø­Ø³Ù‘Ù†Ø©
    function handleCardClick(e) {
        const circle = e.target.closest('.toggle-circle[data-action="toggle"]');
        if (circle) {
            e.stopPropagation();
            const id = circle.dataset.id;
            const type = circle.dataset.type;
            const prayer = CONFIG.prayers.find(p => p.id == id);
            const msg = type === 'p' ? `âœ… <b>ØµÙ„ÙŠØª ${prayer.name}</b>` : `ğŸ“– <b>Ù‚Ø±Ø£Øª ÙˆØ±Ø¯ ${prayer.name}</b>\nØµÙØ­Ø§Øª: ${prayer.range}`;
            toggleTask(parseInt(id), type, msg);
            return;
        }
        
        // Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø¹Ù†ØµØ± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ (Ø¨Ø¯ÙˆÙ† Ø§Ù„Ø¯Ø§Ø¦Ø±Ø©) ÙŠØ¨Ø¯Ù„ Ø§Ù„Ø­Ø§Ù„Ø© Ø£ÙŠØ¶Ø§Ù‹
        const action = e.target.closest('.action-item');
        if (action && !e.target.closest('.toggle-circle')) {
            const card = action.closest('.card');
            const id = card.dataset.prayer;
            const type = action.classList.contains('prayer-action') ? 'p' : 'q';
            const prayer = CONFIG.prayers.find(p => p.id == id);
            const msg = type === 'p' ? `âœ… <b>ØµÙ„ÙŠØª ${prayer.name}</b>` : `ğŸ“– <b>Ù‚Ø±Ø£Øª ÙˆØ±Ø¯ ${prayer.name}</b>\nØµÙØ­Ø§Øª: ${prayer.range}`;
            toggleTask(parseInt(id), type, msg);
        }
    }

    // ğŸš€ Ø§Ù„ØªÙ‡ÙŠØ¦Ø©
    document.addEventListener('DOMContentLoaded', () => {
        createStars();
        setTimeout(() => {
            renderApp();
            // ØªØ­Ø¯ÙŠØ« ÙŠÙˆÙ…ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠ (Ø®ÙÙŠÙ)
            setInterval(() => {
                const today = new Date().toDateString();
                if (localStorage.getItem(CONFIG.storage.dateKey) !== today) {
                    renderApp();
                }
            }, 60000); // ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø© Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† 30 Ø«Ø§Ù†ÙŠØ© Ù„ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø­Ù…Ù„
        }, 200);
    });

    // Ø¬Ø¹Ù„ Ø§Ù„Ø¯ÙˆØ§Ù„ Ù…ØªØ§Ø­Ø©
    window.closeCompletion = closeCompletion;
</script>

</body>
</html>
